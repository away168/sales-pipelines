{
    "application": "multi-template",
    "pipelines": [
    {
        "application": "multi-template",
        "name": "Two Stage - v1",
        "appConfig": {},
        "description": "This is managed by dinghy.  This pipeline demonstrates a simple two-environment deployment using the v2 Kubernetes provider, with a manual judgment in between.",
        "expectedArtifacts": [
            {{ appModule "artifact.github.module"
               "id" "2e665801-3134-48d5-8347-86ea81f60226-t"
               "repo" "justinrlee/sales-pipelines"
               "path" "demo/manifests/dev-justinrleenginx.yml"
            }},
            {{ appModule "artifact.github.module"
               "id" "f898396e-54f0-4428-82d1-29bf05f428a5-t"
               "repo" "justinrlee/sales-pipelines"
               "path" "demo/manifests/prod-justinrleenginx.yml"
            }}
        ],
        "locked": {
            "allowUnlockUi": false,
            "ui": "true"
        },
        "parameterConfig": [{
                "default": "2",
                "description": "How many dev instances would you like?",
                "label": "Dev Instance Count",
                "name": "devcount",
                "required": true
            },
            {
                "default": "4",
                "description": "How many prod instances would you like?",
                "label": "Prod Instance Count",
                "name": "prodcount",
                "required": true
            },
            {
                "default": "world",
                "description": "What Docker image tag (for justinrlee/nginx) should we use?",
                "label": "Docker Tag",
                "name": "tag",
                "required": true
            }
        ],
        "keepWaitingPipelines": false,
        "lastModifiedBy": "justin.lee@armory.io",
        "limitConcurrent": true,
        "stages": [
            {
            "account": "sales-dev",
            "cloudProvider": "kubernetes",
            "manifestArtifactAccount": "github_justinrlee_sales",
            "manifestArtifactId": "2e665801-3134-48d5-8347-86ea81f60226-t",
            "manifests": null,
            "moniker": {
                "app": "kubernetesdemo"
            },
            "name": "Deploy Dev",
            "refId": "1",
            "relationships": {
                "loadBalancers": [],
                "securityGroups": []
            },
            "requisiteStageRefIds": [],
            "source": "artifact",
            "type": "deployManifest"
            },
            {{ module "manual.judgment.module" "refId" "2" "requisiteStageRefIds" ["1"] }},
            {
            "account": "sales-prod",
            "cloudProvider": "kubernetes",
            "manifestArtifactAccount": "github_justinrlee_sales",
            "manifestArtifactId": "f898396e-54f0-4428-82d1-29bf05f428a5-t",
            "manifests": null,
            "moniker": {
                "app": "multi-template"
            },
            "name": "Deploy Prod",
            "refId": "3",
            "relationships": {
                "loadBalancers": [],
                "securityGroups": []
            },
            "requisiteStageRefIds": [
                "2"
            ],
            "source": "artifact",
            "type": "deployManifest"
            }
        ],
        "triggers": [],
        "updateTs": "1531235846933"
    }
    ]
}
